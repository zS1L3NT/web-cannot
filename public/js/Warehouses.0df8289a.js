(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Warehouses"],{"0c75":function(e,t,n){"use strict";n("a43b")},3220:function(e,t,n){},"6d69":function(e,t,n){"use strict";n.r(t);var o=n("7a23"),c=function(e){return Object(o["x"])("data-v-22d265f2"),e=e(),Object(o["v"])(),e},r={class:"Warehouses"},s={style:{"text-align":"right",margin:"auto"}},a=c((function(){return Object(o["g"])("h1",{style:{"font-weight":"bold","font-size":"2rem"}},"Warehouses",-1)})),u={class:"container"},i={class:"row"};function d(e,t,n,c,d,h){var l=Object(o["C"])("Warehouse");return Object(o["u"])(),Object(o["f"])("div",r,[Object(o["g"])("div",s,[d.show_admin_button?(Object(o["u"])(),Object(o["f"])("button",{key:0,type:"button",class:"btn btn-secondary",style:{margin:"5px"},onClick:t[0]||(t[0]=function(e){return h.goToAdmin()})}," Go To Admin ")):Object(o["e"])("",!0)]),a,Object(o["g"])("div",u,[Object(o["g"])("div",i,[(Object(o["u"])(!0),Object(o["f"])(o["a"],null,Object(o["A"])(d.warehouses,(function(e){return Object(o["u"])(),Object(o["d"])(l,{key:e.id,warehouse_id:e.id,onClick:function(){return h.warehouse_clicked(e.id)}},null,8,["warehouse_id","onClick"])})),128))])]),Object(o["g"])("div",{class:Object(o["p"])("white-screen "+(d.show_page?"":"show"))},null,2)])}n("d81d"),n("f9e3");var h=n("cc84"),l=(n("e71f"),n("ea7b"),n("b0c0"),function(e){return Object(o["x"])("data-v-62af7f18"),e=e(),Object(o["v"])(),e}),f={class:"col col-sm-12"},b={class:"warehouse"},w=l((function(){return Object(o["g"])("p",null,"Available Docks:",-1)}));function g(e,t,n,c,r,s){return Object(o["u"])(),Object(o["f"])("div",f,[Object(o["g"])("div",b,[Object(o["g"])("h4",null,Object(o["E"])(r.warehouse.name||""),1),Object(o["g"])("p",null,Object(o["E"])(r.warehouse.address||""),1),Object(o["g"])("div",null,[w,Object(o["g"])("p",null,[Object(o["g"])("b",null,Object(o["E"])(s.available),1),Object(o["i"])(" / "+Object(o["E"])(s.total),1)])])])])}var j={name:"Warehouse",props:{warehouse_id:String},data:function(){return{warehouse:{},docks:[],bookings:[]}},created:function(){var e=this,t=h["b"].firestore();t.collection("warehouses").doc(this.warehouse_id).get().then((function(t){return e.warehouse=t.data()})).catch(console.error),t.collection("docks").where("warehouse_id","==",this.warehouse_id).get().then((function(t){return e.docks=t.docs.map((function(e){return e.data()}))})).catch(console.error),t.collection("bookings").where("warehouse_id","==",this.warehouse_id).where("status","not-in",["completed","cancelled"]).get().then((function(t){return e.bookings=t.docs.map((function(e){return e.data()}))})).catch(console.error)},computed:{available:function(){return this.docks.length-this.bookings.length},total:function(){return this.docks.length}}},p=(n("854e"),n("6b0d")),O=n.n(p);const v=O()(j,[["render",g],["__scopeId","data-v-62af7f18"]]);var m=v,_=h["b"].firestore(),k={name:"Warehouses",components:{Warehouse:m},data:function(){return{warehouses:[],show_page:!0,show_admin_button:!1}},created:function(){var e=this;h["b"].auth().onAuthStateChanged((function(t){t?(_.collection("bookings").where("user_id","==",t.uid).where("status","not-in",["completed","cancelled"]).get().then((function(t){var n=t.docs[0];n&&n.exists&&e.$router.push("/my-booking")})),_.collection("users").doc(t.uid).get().then((function(t){return e.show_admin_button=t.data().is_staff}))):e.$router.push("/")})),_.collection("warehouses").get().then((function(t){return e.warehouses=t.docs.map((function(e){return e.data()}))})).catch(console.error)},methods:{warehouse_clicked:function(e){var t=this;this.show_page=!1,setTimeout((function(){t.$router.push("/book/"+e)}),400)},goToAdmin:function(){this.$router.push("/admin")}}};n("0c75");const y=O()(k,[["render",d],["__scopeId","data-v-22d265f2"]]);t["default"]=y},"854e":function(e,t,n){"use strict";n("3220")},a43b:function(e,t,n){},b727:function(e,t,n){var o=n("0366"),c=n("44ad"),r=n("7b0b"),s=n("07fa"),a=n("65f0"),u=[].push,i=function(e){var t=1==e,n=2==e,i=3==e,d=4==e,h=6==e,l=7==e,f=5==e||h;return function(b,w,g,j){for(var p,O,v=r(b),m=c(v),_=o(w,g,3),k=s(m),y=0,x=j||a,A=t?x(b,k):n||l?x(b,0):void 0;k>y;y++)if((f||y in m)&&(p=m[y],O=_(p,y,v),e))if(t)A[y]=O;else if(O)switch(e){case 3:return!0;case 5:return p;case 6:return y;case 2:u.call(A,p)}else switch(e){case 4:return!1;case 7:u.call(A,p)}return h?-1:i||d?d:A}};e.exports={forEach:i(0),map:i(1),filter:i(2),some:i(3),every:i(4),find:i(5),findIndex:i(6),filterReject:i(7)}},d81d:function(e,t,n){"use strict";var o=n("23e7"),c=n("b727").map,r=n("1dde"),s=r("map");o({target:"Array",proto:!0,forced:!s},{map:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=Warehouses.0df8289a.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Booking"],{"04d1":function(e,t,n){var r=n("342f"),o=r.match(/firefox\/(\d+)/i);e.exports=!!o&&+o[1]},"37c1":function(e,t,n){"use strict";n("d31a")},"4e82":function(e,t,n){"use strict";var r=n("23e7"),o=n("59ed"),a=n("7b0b"),i=n("07fa"),c=n("577e"),d=n("d039"),s=n("addb"),u=n("a640"),l=n("04d1"),f=n("d998"),b=n("2d00"),h=n("512c"),v=[],p=v.sort,g=d((function(){v.sort(void 0)})),k=d((function(){v.sort(null)})),m=u("sort"),j=!d((function(){if(b)return b<70;if(!(l&&l>3)){if(f)return!0;if(h)return h<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)v.push({k:t+r,v:n})}for(v.sort((function(e,t){return t.v-e.v})),r=0;r<v.length;r++)t=v[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}})),O=g||!k||!m||!j,w=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:c(t)>c(n)?1:-1}};r({target:"Array",proto:!0,forced:O},{sort:function(e){void 0!==e&&o(e);var t=a(this);if(j)return void 0===e?p.call(t):p.call(t,e);var n,r,c=[],d=i(t);for(r=0;r<d;r++)r in t&&c.push(t[r]);c=s(c,w(e)),n=c.length,r=0;while(r<n)t[r]=c[r++];while(r<d)delete t[r++];return t}})},"512c":function(e,t,n){var r=n("342f"),o=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!o&&+o[1]},"630f":function(e,t,n){},6660:function(e,t,n){"use strict";n("630f")},"7db0":function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").find,a=n("44d2"),i="find",c=!0;i in[]&&Array(1)[i]((function(){c=!1})),r({target:"Array",proto:!0,forced:c},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a(i)},"8bf3":function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),o=function(e){return Object(r["x"])("data-v-45e9c076"),e=e(),Object(r["v"])(),e},a={class:"Book"},i={key:1,class:"container"},c={class:"row"},d=o((function(){return Object(r["g"])("h1",null,"Book a Dock",-1)})),s=o((function(){return Object(r["g"])("p",null,[Object(r["i"])(" You are expected to reach your destination by "),Object(r["g"])("span",null,"60 minutes"),Object(r["i"])(". If not, your booking will be automatically "),Object(r["g"])("span",null,"cancelled")],-1)})),u={class:"inputs"},l=["value","id","disabled"],f=["for"],b={key:0,id:"estArrival"},h=["disabled"],v=Object(r["h"])('<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" data-v-45e9c076><div class="modal-dialog" data-v-45e9c076><div class="modal-content" data-v-45e9c076><div class="modal-header" data-v-45e9c076><h5 class="modal-title" id="staticBackdropLabel" data-v-45e9c076>Error Occured</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-45e9c076></button></div><div class="modal-body" style="text-align:left;" data-v-45e9c076> You already have an existing booking! </div><div class="modal-footer" data-v-45e9c076><button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-v-45e9c076> Close </button></div></div></div></div>',1);function p(e,t,n,o,p,g){var k=Object(r["C"])("ClipLoader");return Object(r["u"])(),Object(r["f"])(r["a"],null,[Object(r["g"])("div",a,[p.loading.every((function(e){return e}))?(Object(r["u"])(),Object(r["d"])(k,{key:0,size:"75px"})):Object(r["e"])("",!0),p.loading.every((function(e){return e}))?Object(r["e"])("",!0):(Object(r["u"])(),Object(r["f"])("div",i,[Object(r["g"])("div",c,[Object(r["g"])("form",{onSubmit:t[1]||(t[1]=function(){return g.submit&&g.submit.apply(g,arguments)})},[d,Object(r["g"])("h2",null,Object(r["E"])(p.warehouse.name||""),1),s,Object(r["g"])("div",u,[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["A"])(p.docks,(function(e){return Object(r["u"])(),Object(r["f"])("div",{key:e.id,class:"form-check"},[Object(r["M"])(Object(r["g"])("input",{class:"form-check-input",type:"radio",name:"dock","onUpdate:modelValue":t[0]||(t[0]=function(e){return p.dock_id=e}),value:e.id,id:e.id,disabled:g.input_disabled(e.id)},null,8,l),[[r["G"],p.dock_id]]),Object(r["g"])("label",{class:"form-check-label",for:e.id},[Object(r["g"])("p",null,Object(r["E"])(e.name||""),1),g.booking_eta(e.id)?(Object(r["u"])(),Object(r["f"])("p",b,"Est. Arrival: +"+Object(r["E"])(g.booking_eta(e.id)),1)):Object(r["e"])("",!0)],8,f)])})),128))]),Object(r["g"])("button",{class:"btn btn-primary",type:"submit",disabled:!p.dock_id},"Book Dock",8,h)],32)])]))]),v],64)}var g=n("1da1"),k=(n("96cf"),n("fb6a"),n("4e82"),n("d81d"),n("7db0"),n("f9e3"),n("4989")),m={class:"v-spinner"};function j(e,t,n,o,a,i){return Object(r["M"])((Object(r["u"])(),Object(r["f"])("div",m,[Object(r["g"])("div",{class:"v-clip",style:Object(r["q"])(i.spinnerStyle)},null,4)],512)),[[r["J"],n.loading]])}var O={name:"ClipLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"35px"},radius:{type:String,default:"100%"}},computed:{spinnerStyle:function(){return{height:this.size,width:this.size,borderWidth:"2px",borderStyle:"solid",borderColor:this.color+" "+this.color+" transparent",borderRadius:this.radius,background:"transparent"}}}},w=(n("6660"),n("6b0d")),y=n.n(w);const _=y()(O,[["render",j]]);var x=_,A=n("cc84"),B=(n("e71f"),n("ea7b"),A["b"].firestore()),C={name:"Book",components:{ClipLoader:x},data:function(){return{loading:[!0,!0],user_id:"",warehouse:{},docks:[],bookings:[],dock_id:""}},created:function(){var e=this,t=this.$route.path.slice(6);A["b"].auth().onAuthStateChanged((function(t){t?(e.loading[0]=!1,e.user_id=t.uid):e.$router.push("/")})),B.collection("warehouses").doc(t).get().then((function(t){t.exists?(e.loading[1]=!1,e.warehouse=t.data()):e.$router.push("/warehouses")})).catch(console.error),B.collection("docks").where("warehouse_id","==",t).get().then((function(t){return(e.docks=t.docs.map((function(e){return e.data()}))).sort((function(e,t){return e.name>t.name?1:-1}))})).catch(console.error),B.collection("bookings").where("warehouse_id","==",t).where("status","not-in",["completed","cancelled"]).get().then((function(t){return e.bookings=t.docs.map((function(e){return e.data()}))})).catch(console.error)},methods:{input_disabled:function(e){return!!this.bookings.find((function(t){return t.dock_id===e}))},submit:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.preventDefault(),t.loading=[!0],n.prev=2,n.next=5,B.collection("bookings").where("user_id","==",t.user_id).where("status","not-in",["completed","cancelled"]).get();case 5:if(r=n.sent.docs[0],!r||!r.exists){n.next=11;break}new k["Modal"](document.getElementById("staticBackdrop"),{}).show(),t.loading=[!1],n.next=15;break;case 11:return o=B.collection("bookings").doc(),n.next=14,o.set({id:o.id,user_id:t.user_id,dock_id:t.dock_id,warehouse_id:t.warehouse.id,status:"waiting_arrival",book_time:Date.now(),end_time:null,eta:""});case 14:t.$router.push("/warehouses");case 15:n.next=20;break;case 17:n.prev=17,n.t0=n["catch"](2),console.error(n.t0);case 20:case"end":return n.stop()}}),n,null,[[2,17]])})))()},booking_eta:function(e){var t;return(null===(t=this.bookings.find((function(t){return t.dock_id===e})))||void 0===t?void 0:t.eta)||""}}};n("37c1");const S=y()(C,[["render",p],["__scopeId","data-v-45e9c076"]]);t["default"]=S},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},addb:function(e,t){var n=Math.floor,r=function(e,t){var i=e.length,c=n(i/2);return i<8?o(e,t):a(r(e.slice(0,c),t),r(e.slice(c),t),t)},o=function(e,t){var n,r,o=e.length,a=1;while(a<o){r=a,n=e[a];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==a++&&(e[r]=n)}return e},a=function(e,t,n){var r=e.length,o=t.length,a=0,i=0,c=[];while(a<r||i<o)a<r&&i<o?c.push(n(e[a],t[i])<=0?e[a++]:t[i++]):c.push(a<r?e[a++]:t[i++]);return c};e.exports=r},b727:function(e,t,n){var r=n("0366"),o=n("44ad"),a=n("7b0b"),i=n("07fa"),c=n("65f0"),d=[].push,s=function(e){var t=1==e,n=2==e,s=3==e,u=4==e,l=6==e,f=7==e,b=5==e||l;return function(h,v,p,g){for(var k,m,j=a(h),O=o(j),w=r(v,p,3),y=i(O),_=0,x=g||c,A=t?x(h,y):n||f?x(h,0):void 0;y>_;_++)if((b||_ in O)&&(k=O[_],m=w(k,_,j),e))if(t)A[_]=m;else if(m)switch(e){case 3:return!0;case 5:return k;case 6:return _;case 2:d.call(A,k)}else switch(e){case 4:return!1;case 7:d.call(A,k)}return l?-1:s||u?u:A}};e.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)}},d31a:function(e,t,n){},d81d:function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").map,a=n("1dde"),i=a("map");r({target:"Array",proto:!0,forced:!i},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},fb6a:function(e,t,n){"use strict";var r=n("23e7"),o=n("e8b5"),a=n("68ee"),i=n("861d"),c=n("23cb"),d=n("07fa"),s=n("fc6a"),u=n("8418"),l=n("b622"),f=n("1dde"),b=f("slice"),h=l("species"),v=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!b},{slice:function(e,t){var n,r,l,f=s(this),b=d(f),g=c(e,b),k=c(void 0===t?b:t,b);if(o(f)&&(n=f.constructor,a(n)&&(n===Array||o(n.prototype))?n=void 0:i(n)&&(n=n[h],null===n&&(n=void 0)),n===Array||void 0===n))return v.call(f,g,k);for(r=new(void 0===n?Array:n)(p(k-g,0)),l=0;g<k;g++,l++)g in f&&u(r,l,f[g]);return r.length=l,r}})}}]);
//# sourceMappingURL=Booking.3ea2f7e2.js.map